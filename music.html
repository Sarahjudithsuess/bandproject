<!DOCTYPE html>
<html lang="en">
    <head>
        <title>THE MONKEES</title>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="assets/CSS/style.css" type="text/css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="/path/to/parallax.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script>
            var Carousel = function ( $target )
{
	this.$ = {};
	this.$.container  	    = $target;
	this.$.carousel 		= this.$.container.find('.carousel');
	this.$.prev 	 		= this.$.container.find('.prev');
	this.$.next 		    = this.$.container.find('.next');
	this.$.play 		    = this.$.container.find('.play');
	this.$.slides_container = this.$.container.find('.slides .items');
	this.$.slides 			= this.$.slides_container.find('.item');
	this.$.seek_bar			= this.$.container.find('.seek-bar');
	this.$.progress_bar		= this.$.container.find('.progress-bar');

	this.$.choice			= this.$.container.find('.choice');
	this.$.tracks 			= this.$.choice.find('.tracks');
	this.$.track 			= this.$.tracks.find('.track');
	this.$.speakers			= this.$.track.find('.speakers');
	this.$.music			= this.$.container.find('.music');

	this.count = this.$.slides.length;
	this.init_events();
};

Carousel.prototype.index = 0;
Carousel.prototype.count = 0;
Carousel.prototype.progress_ratio = 0;
Carousel.prototype.swipe = 0;

Carousel.prototype.init_events = function (){
	var that = this;

	/* On click on the next and prev button, swipe the carousel */ 
	this.$.next.on('click', function(){
		that.next();
		return false;
	});
	this.$.prev.on('click', function(){
		that.prev();
		return false;
	});

	/* We click on one track name, change to that music and that image */ 
	this.$.track.each(function (data) {
       	$(this).on('click', function (){
       		
       		that.go_to( data, $carousel.index);
       	});
    });

	this.changeMusic();


	/* CHECK WHEN WE CHANGE MUSIC ON KEYBOARD */
	$(window).keydown(function(evt) {
		if (evt.which == 39) {
			that.next();
			return false;
	  	}
	  	if (evt.which == 37) {
			that.prev();
			return false;
	  	}
	  	if (evt.which == 32) {
	  		play = !play;
			that.changeMusic();
			return false;
	  	}
	});

	/* CHECK WHEN WE PAUSE BY CLICKING ON THE IMAGE */
	this.$.play.on('click', function(){
		play = !play;
		that.changeMusic();
		return false;
	});


	this.$.speakers.on('click', function(){
		if (that.$.music[0].volume == 1) {
			that.$.music[0].volume = 0;
			that.$.speakers.css({
				"background-image": "url(http://audeficheux.com/projects/carousel/src/images/mute.png)"
			});
		}
		else {
			that.$.music[0].volume = 1;
			that.$.speakers.css({
				"background-image": "url(http://audeficheux.com/projects/carousel/src/images/speaker.png)"
			});
		}
	});

	/* CHECK WHEN THE MUSIC ENDS */ 
	this.$.music.bind('ended', function(){
		that.next();
	});


	/* FOR THE TOUCH CONTROL */
	this.$.carousel.on('touchstart',function(e){
		that.swipe = e.originalEvent.touches[0].clientX;
	});

	this.$.carousel.on('touchend',function(e){
		if (e.originalEvent.changedTouches[0].clientX > that.swipe + 10)
			that.prev();
		else if (e.originalEvent.changedTouches[0].clientX < that.swipe - 10)
			that.next();
		/* The + / - 10 allows to not swipe when we touch the screen without purpose*/
	});


	/**** SEEK BAR ****/
	window.setInterval(function () {
		this.progress_ratio = that.$.music[0].currentTime / that.$.music[0].duration;
	    that.$.progress_bar.css({
		  transform: "scaleX(" + progress_ratio + ")"
		});
	}, 50);

	/* Allows to change the current time of the song */ 
	this.$.seek_bar.on('click', function (e) {
	        var x = e.clientX - that.$.seek_bar.offset().left,
	        ratio = x / that.$.seek_bar.width(),
	        time = ratio * that.$.music[0].duration;
	    that.$.music[0].currentTime = time;
	});

};


Carousel.prototype.next = function()
{
	this.go_to( this.index + 1, this.index);
};

Carousel.prototype.prev = function()
{
	this.go_to( this.index - 1, this.index);

};

Carousel.prototype.go_to = function( index, currentIndex )
{	
	if (currentIndex != index) { //Avoid to start over the audio by clicking on the current music and mute the audio

		index = index%this.count;
		if (index < 0)
			index = index + this.count;

		this.$.carousel.css({
			"background-image": "url(http://audeficheux.com/projects/carousel/src/images/background" + index + ".png)"
		});

		/* Make visible or invisible the speakers*/
		this.$.speakers[currentIndex].classList.add('invisible');
		this.$.speakers[index].classList.remove('invisible');

		/* Change the source of the music */
		this.$.music[0].setAttribute('src', 'http://audeficheux.com/projects/carousel/src/medias/' + index + '.mp3');
		this.changeMusic();

		/* Make the scroll follow the current music */
		$carousel.$.tracks.animate({scrollTop:50*index - 50},300);

		/* Animate the slider */ 
		this.$.slides_container.css({
		  transform: "translateX(" + (-225)*index + "px)"
		});
		this.index = index;

	}
};

Carousel.prototype.changeMusic = function()
{	
	/* Play or pause the music */ 	
	if (play == true) {
		this.$.play[0].classList.add('invisible');
		this.$.music[0].play();
	}
	else {
		this.$.play[0].classList.remove('invisible');
		this.$.music[0].pause();
	}
};

var $carousel = new Carousel( $('.container ') );

var play = false

        </script>

    </head>
    <body>
        
        <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span> 
      </button>
      <a class="navbar-brand" href="home.html">The MONKEES</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="home.html">HOME</a></li>
        <li><a href="about.html">ABOUT</a></li>
        <li><a href="music.html">MUSIC</a></li>
        <li><a href="gallery.html">GALLERY</a></li>
        <li><a href="contact.html">CONTACT</a></li>
        <li class="dropdown"></li>
        <li><a href="#"><span class="glyphicon glyphicon-search"></span></a></li>
          </ul>
        
    </div>
  </div>
</nav>

<div class="container text-center">
         <h3>MUSIC</h3>
         
         </div>
    
       <div class="container">
			<!-- CAROUSEL -->
			<div class="carousel">

				<!-- SLIDES -->
				<div class="slides">
					<div class="items">
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/selah.png)"></div> <p class="artist">SELAH SUE</p><p class="track">Feel</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/bruno.png)"></div> <p class="artist">BRUNO MARS</p><p class="track">Runaway Baby</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/calvin.png)"></div> <p class="artist">CALVIN HARRIS</p><p class="track">Sweet Nothing</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/onerep.png)"></div> <p class="artist">ONE REPUBLIC</p><p class="track">Preacher</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/ellie.png)"></div> <p class="artist">ELLIE GOULDING</p><p class="track">Starry Eyed</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/thomston.png)"></div> <p class="artist">THOMSTON</p><p class="track">Brain Dead</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/halsey.png)"></div> <p class="artist">HALSEY</p><p class="track">New Americana</p></div>
						<div class="item"><div class="image" style="background-image:url(http://audeficheux.com/projects/carousel/src/medias/frances.png)"></div> <p class="artist">FRANCES</p><p class="track">Grow</p></div>
					</div>
				</div>

				<!-- SIBLINGS (PREVIOUS - NEXT) -->
				<div class="siblings">
					<a href="#" class="sibling prev"></a>
					<a href="#" class="play"></a>
					<a href="#" class="sibling next"></a>
				</div>

				<div class="seek-bar">
	                <div class="progress-bar"></div>
	            </div>

			</div>

			<div class="choice">
				<div class="title">
					<p>SONGS</p>
				</div>
				<div class="tracks">
					<div class="track 1">
						<div class="number">1</div>
						<div class="name"><p>Selah Sue</p><p class="song">Feel</p></div>
						<div class="speakers"></div>
					</div>
					<div class="track 2">
						<div class="number">2</div>
						<div class="name"><p>Bruno Mars</p><p class="song">Runaway Baby</p></div>
						<div class="speakers invisible"></div>
					</div>
					<div class="track 3">
						<div class="number">3</div>
						<div class="name"><p>Calvin Harris</p><p class="song">Sweet Nothing</p></div>
						<div class="speakers invisible"></div>
					</div>
					<div class="track 4">
						<div class="number">4</div>
						<div class="name"><p>One Republic</p><p class="song">Preacher</p></div>
						<div class="speakers invisible"></div>
					</div>
					<div class="track 5">
						<div class="number">5</div>
						<div class="name"><p>Ellie Goulding</p><p class="song">Starry Eyed</p></div>
						<div class="speakers invisible"></div>
					</div>
					<div class="track 6">
						<div class="number">6</div>
						<div class="name"><p>Thomston</p><p class="song">Brain Dead</p></div>
						<div class="speakers invisible"></div>
					</div>
					<div class="track 7">
						<div class="number">7</div>
						<div class="name"><p>Halsey</p><p class="song">New Americana</p></div>
						<div class="speakers invisible"></div>
					</div>
					<div class="track 8">
						<div class="number">8</div>
						<div class="name"><p>Frances</p><p class="song">Grow</p></div>
						<div class="speakers invisible"></div>
					</div>
				</div>
			</div>

			<audio class="music"><source src="http://audeficheux.com/projects/carousel/src/medias/0.mp3" type="audio/mpeg"> Your browser doesn't support video API</audio>

		</div>

<div class="credits"><a href="https://dribbble.com/shots/2166010-October-Select-Artist"> Design inspired by Regy Perlera </a></div>

  
</footer>


        
    </body>
</html>